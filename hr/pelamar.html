<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>HR â€“ Pelamar</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
body{font-family:Inter;background:#f3f4f6;padding:30px}
table{width:100%;background:#fff;border-radius:12px}
th,td{padding:12px;border-bottom:1px solid #e5e7eb}
button{padding:6px 10px;border:none;border-radius:6px;cursor:pointer}
.green{background:#16a34a;color:#fff}
.red{background:#dc2626;color:#fff}
</style>
</head>

<body>

<h2>Daftar Pelamar</h2>

<table>
<thead>
<tr>
<th>Nama</th>
<th>Email</th>
<th>Lowongan</th>
<th>Status</th>
<th>Aksi</th>
</tr>
</thead>
<tbody id="tbl"></tbody>
</table>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getFirestore, collection, getDocs, updateDoc, doc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCdi_d9l8azfwgeFoB8aF7RdUvgcaexQu0",
  authDomain: "career-portal-ace63.firebaseapp.com",
  projectId: "career-portal-ace63"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const snap = await getDocs(collection(db,"applicants"));
const tbl = document.getElementById("tbl");

snap.forEach(d=>{
  const a = d.data();
  const tr = document.createElement("tr");

  tr.innerHTML = `
    <td>${a.name}</td>
    <td>${a.email}</td>
    <td>${a.jobId}</td>
    <td>${a.status}</td>
    <td></td>
  `;

  const interview = document.createElement("button");
  interview.innerText="Interview";
  interview.className="green";
  interview.onclick=()=>update(d.id,"interview");

  const reject = document.createElement("button");
  reject.innerText="Reject";
  reject.className="red";
  reject.onclick=()=>update(d.id,"rejected");

  tr.children[4].append(interview,reject);
  tbl.appendChild(tr);
});

async function update(id,status){
  await updateDoc(doc(db,"applicants",id),{status});
  location.reload();
}
</script>

</body>
</html>
